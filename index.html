<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FINESSE IMAGE EDITOR</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    <style>
         .dark-mode{
            --primary-color: #6c5ce7;
            --secondary-color: #a29bfe;
            --text-color: #2d3436;
            --bg-color: #f5f6fa;
            --panel-color: #ffffff;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --border-color: #dfe6e9;
               --accent: rgba(151, 151, 42, 0.949);
                --primary: rgba(242, 242, 248, 0.922);
                --head:#6c5ce7;
                --strong:#6c5ce7;
                --dark: white;

        }

        :root {
             --primary: #6c5ce7;
             --strong:#6c5ce7;
            --secondary: #a29bfe;
            --accent: #fd79a8;
            --dark: #2d3436;
            --primary-color: #a29bfe;
            --secondary-color: #6c5ce7;
            --text-color: #f5f6fa;
            --bg-color: #2d3436;
            --panel-color: #1e272e;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --border-color: #636e72;
            --head:#212525;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }


         header {
            text-align: center;
            margin-bottom: 30px;
        }
         header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .logo {
            font-family: 'Montserrat', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
            position: relative;
            display: inline-block;
        }
        
        .logo::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            transform: scaleX(0);
            transform-origin: left;
            animation: underline 2s infinite alternate;
        }
        
        @keyframes underline {
            0% {
                transform: scaleX(0);
            }
            100% {
                transform: scaleX(1);
            }
        }
        
        .logo span {
            display: inline-block;
            animation: bounce 0.5s infinite alternate;
        }
        
        .logo span:nth-child(2) {
            animation-delay: 0.1s;
        }
        
        .logo span:nth-child(3) {
            animation-delay: 0.2s;
        }
        
        .logo span:nth-child(4) {
            animation-delay: 0.3s;
        }
        
        .logo span:nth-child(5) {
            animation-delay: 0.4s;
        }
        
        .logo span:nth-child(6) {
            animation-delay: 0.5s;
        }
        
        .logo span:nth-child(7) {
            animation-delay: 0.6s;
        }
        
        @keyframes bounce {
            0% {
                transform: translateY(0);
            }
            100% {
                transform: translateY(-10px);
            }
        }
        
        .founder {
            font-style: italic;
            color: var( --text-color);
            margin-bottom: 20px;
        }
        
        .theme-toggle {
            	position: fixed;
			top: 1rem;
			right: 5rem;
			z-index: 1000;
			background: rgba(255, 255, 255, 0.1);
			border: none;
			border-radius: 50%;
			width: 30px;
			height: 30px;
			cursor: pointer;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 1.2rem;
			backdrop-filter: blur(5px);
			-webkit-backdrop-filter: blur(5px);
			transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background: var(--secondary-color);
        }

        .editor-container {
            display: flex;
            gap: 20px;
        }

        .tool-panel {
            width: 250px;
            background-color: var(--panel-color);
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 4px 6px var(--shadow-color);
        }

        .tool-section {
            margin-bottom: 20px;
        }

        .tool-section h3 {
            margin-bottom: 10px;
            color: var(--primary-color);
            font-size: 1rem;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 5px;
        }

        .tool-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            text-align: center;
        }

        .btn:hover {
            background-color: var(--secondary-color);
        }

        .btn-secondary {
            background-color: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
        }

        .btn-secondary:hover {
            background-color: var(--primary-color);
            color: white;
        }

        input[type="range"], input[type="color"], select {
            width: 100%;
            padding: 5px;
            border-radius: 5px;
            border: 1px solid var(--border-color);
            background-color: var(--panel-color);
            color: var(--text-color);
        }

        .sticker-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .sticker {
            width: 100%;
            cursor: pointer;
            border-radius: 5px;
            transition: transform 0.2s;
        }

        .sticker:hover {
            transform: scale(1.1);
        }

        .canvas-container {
            flex-grow: 1;
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px var(--shadow-color);
            background-color: var(--panel-color);
        }

        #canvas {
            display: block;
            max-width: 100%;
            background-color: white;
            cursor: crosshair;
        }

        .draggable {
            position: absolute;
            cursor: move;
            user-select: none;
        }

        .draggable-text {
            min-width: 100px;
            padding: 5px;
            outline: none;
            resize: both;
            overflow: hidden;
        }

        .draggable-sticker {
            width: 100px;
            height: 100px;
            object-fit: contain;
        }

        .resize-handle {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: var(--primary-color);
            right: 0;
            bottom: 0;
            cursor: nwse-resize;
        }

        .delete-btn {
            position: absolute;
            top: 0;
            right: 0;
            background-color: red;
            color: white;
            border: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 12px;
        }

        .filter-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .filter-option {
            width: 100%;
            height: 60px;
            border-radius: 5px;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .filter-option:hover, .filter-option.active {
            border-color: var(--primary-color);
        }

        .footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
            color: var(--secondary-color);
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .editor-container {
                flex-direction: column;
            }
            .tool-panel {
                width: 100%;
            }
        }
        .navbar1{
            background-color: red;
        }
    .head{
        background-color: var(--head);
    }
    .guidecon{
        position: absolute;
        visibility: visible;
        display: flex;
        justify-content: center;
        align-items: center;
        top: 0;
        background-color: #1b1f20c0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 9999;
    
    }
    .guide{
        width: 300px;
        height: 200px;
        text-align: center;
        background-color: var(--primary);
        color: white;
        border-radius: 6px;
        box-shadow: 2px 3px 10px white;
        animation: bonce 2s linear alternate;
    }
    @keyframes  bonce{
        0%{   
            opacity: 0;
        }
        50%{
        opacity: 0.5;
        }
        100%{
         transform: translatey(20px);
            scale: 1;
            opacity: 1;
        }
    }


    
    	.modal__content {
            
			transition: all 0.3s ease;
		}

		.modal.show .modal__content {
			animation: modalSlideIn 0.3s ease;
		}

		@keyframes modalSlideIn {
			from {
				transform: translateY(-20px);
				opacity: 0;
			}

			to {
				transform: translateY(0);
				opacity: 1;
			}
		}

		#confirmationModal .modal__content {
			background: var(--card);
			color: var(--text);
			max-width: 400px;
			text-align: center;
			padding: 2rem;
		}

		#confirmationModal h3 {
			margin: 1rem 0;
			color: var(--primary);
		}

		#confirmationMessage {
			color: var(--text);
		}
     
    		/* Help button styles */
		.help-toggle {
			position: fixed;
			top: 1rem;
			right: 8rem;
			z-index: 1000;
			background: rgba(255, 255, 255, 0.1);
			border: none;
			border-radius: 50%;
			width: 30px;
			height: 30px;
			cursor: pointer;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 1.2rem;
			backdrop-filter: blur(5px);
			-webkit-backdrop-filter: blur(5px);
			transition: all 0.3s ease;
		}

		.help-toggle:hover {
			transform: scale(1.1);
		     background: var(--secondary-color);
		}

		/* Help modal styles */
		.help-modal__content {
			max-width: 650px;
			max-height: 85vh;
			overflow-y: auto;
			padding: 0;
		}

		.help-header {
			background: linear-gradient(135deg, var(--primary), var(--secondary));
			color: white;
			padding: 1.5rem;
			display: flex;
			align-items: center;
			gap: 1rem;
			border-radius: var(--radius) var(--radius) 0 0;
		}

		.help-icon {
			font-size: 2.5rem;
		}

		.help-header h2 {
			margin: 0;
			font-size: 1.8rem;
		}

		.help-intro {
			padding: 1.5rem 1.5rem 0.5rem;
			color: var(--text);
			font-size: 1.1rem;
			border-bottom: 1px solid var(--border);
			margin: 0;
		}

		.help-content {
			padding: 1.5rem;
		}

		.help-section {
			margin-bottom: 2rem;
			background: rgba(255, 255, 255, 0.05);
			border-radius: var(--radius);
			overflow: hidden;
			border: 1px solid var(--border);
		}

		.help-section-header {
			display: flex;
			align-items: center;
			gap: 0.75rem;
			padding: 1rem 1.5rem;
			background: rgba(0, 0, 0, 0.03);
			border-bottom: 1px solid var(--border);
		}

		.help-section-icon {
			font-size: 1.5rem;
		}

		.help-section h3 {
			margin: 0;
			color: var(--strong);
			font-size: 1.3rem;
		}

		.help-section-content {
			padding: 1.5rem;
		}

		.help-section-content p {
			margin-top: 0;
			margin-bottom: 1rem;
		}

		.help-section-content ul,
		.help-section-content ol {
			padding-left: 1.5rem;
			margin-bottom: 0;
		}

		.help-section-content li {
			margin-bottom: 0.75rem;
			line-height: 1.5;
		}

		.help-section-content li:last-child {
			margin-bottom: 0;
		}

		.help-section-content strong {
			color: var(--strong);
		}

		.help-footer {
			padding: 1rem 1.5rem 1.5rem;
			text-align: center;
			border-top: 1px solid var(--strong);
		}

		.help-close-btn {
			min-width: 120px;
		}
        .modal {
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: rgba(0, 0, 0, 0.5);
			display: none;
			justify-content: center;
			align-items: center;
			z-index: 1000;
		}

		.modal.show {
			display: flex;
		}

		.modal__content {
			background: var(--dark);
			padding: 2rem;
			border-radius: var(--strong);
			width: 90%;
			max-width: 500px;
			position: relative;
		}

		.modal__close {
			position: absolute;
			top: 1rem;
			right: 1rem;
			background: none;
			border: none;
			font-size: 1.5rem;
			cursor: pointer;
			color: #666;
		}
    
    </style>
</head>
<body>
 <div class="container">

  <header>
    <nav class="navbar navbar-dark head fixed-top">
        <div class="container-fluid">
          <h1 class="logo">
                <span>F</span>
                <span>I</span>
                <span>N</span>
                <span>E</span>
                <span>S</span>
                <span>S</span>
                <span>E</span>
            </h1>
            <button class="help-toggle" id="helpToggle">‚ùì</button>
            <button class="theme-toggle" id="themeToggle">
                <span id="themeIcon">üåô</span> 
            </button>



            

          <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDarkNavbar" aria-controls="offcanvasDarkNavbar" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasDarkNavbar" aria-labelledby="offcanvasDarkNavbarLabel">
            <div class="offcanvas-header">
              <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel">          <h1 class="logo">
                <span>F</span>
                <span>I</span>
                <span>N</span>
                <span>E</span>
                <span>S</span>
                <span>S</span>
                <span>E</span>
            </h1> </h5>
             
              <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
              <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="#">üè† Home</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#" >üë®‚Äçüíº PORTFOLIO</a>
                </li>
                 <li class="nav-item">
                  <a class="nav-link" href="donate.html" >üíû DONATE</a>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                   üåç CONTACT
                  </a>
                  <ul class="dropdown-menu dropdown-menu-dark">
                    <li><a class="dropdown-item" href="https://wa.me/23407068902982">üì≤ whatsapp</a></li>
                    <li><a class="dropdown-item" href="tiktok.com/@fhiness.dev">„ÄΩ tiktok</a></li>
                    <li>
                      <hr class="dropdown-divider">
                    </li>
                    <li><a class="dropdown-item" href="#">üê¶ linkedin</a></li>
                  </ul>
                </li>
              </ul>

            </div>
          </div>
        </div>
      </nav>
    </header>
    <br> <hr>
         <header>
           
            <h2>IMAGE EDITOR</h2>
            <p class="founder">by Odebunmi Quadri</p>

        </header>
        
       <div class="guidecon" id="guide" onload="guide()">
        <div class="guide">
            <h1>NOTE :-</h1>
            <p>Scroll down to see EDITED image <br>
            in mobile devicesüì≤ <i> :-use a laptop for best experience</i></p>
            
            <i>visit the nav bar for more guide</i>
            <a onclick="hide()" style="cursor: pointer;">‚ùå</a>
        </div>
       </div>



       <div class="modal" id="helpModal">
		<div class="modal__content help-modal__content">
			<button class="modal__close" onclick="closeHelpModal()">&times;</button>
			<div class="help-header">
				<div class="help-icon">üìò</div>
				<h2>User Guide</h2>
			</div>
			<p class="help-intro">Welcome to FINNESSE IMAGE EDITOR!. This guide will help you get the most out of this application.</p>

			<div class="help-content">
				<section class="help-section">
					<div class="help-section-header">
						<div class="help-section-icon">üéØ</div>
						<h3>Getting Started</h3>
					</div>
					<div class="help-section-content">
						<p>This image editor helps you edit your photos with a simple kanban board:</p>
						<ul>
							<li><strong>Upload image</strong> - Upload to start editing</li>
							<li><strong>Edit image</strong> - Edit image with designed tools</li>
							<li><strong>Download</strong> - Download edited image</li>
						</ul>
					</div>
				</section>

				<section class="help-section">
					<div class="help-section-header">
						<div class="help-section-icon">‚ûï</div>
						<h3>Creating Tools</h3>
					</div>
					<div class="help-section-content">
						<p>To upload a new canvas/image:</p>
						<ol>
							<li>Click the <strong>"+ Upload image"</strong> button in image tools</li>
							<li>clear canvas to upload a new IMAGE or click upload image</li>
							
							<li>Click <strong>"Download"</strong> to save to device</li>
						</ol>
					</div>
				</section>

				<section class="help-section">
					<div class="help-section-header">
						<div class="help-section-icon">üîÑ</div>
						<h3>Managing Tools</h3>
					</div>
					<div class="help-section-content">
						<p>You can easily manage your edits with these actions:</p>
						<ul>
                            <li><strong>Resize</strong> - Drag and drop width value between the range bar. Then tap 'apply resize' </li>
                            <li><strong>Add text</strong>- add text to the input bar,Text color, Font, then tap "add text" </li>
							<li><strong>Drag</strong> - Drag and drop texts and sticker on image for better positioning</li>
							<li><strong>Filter</strong> - Click the 'filter' icon to modify a filter to the image</li>
							<li><strong>Delete</strong> - Click the ‚ùå icon to remove a text</li>
						</ul>
					</div>
				</section>

				<section class="help-section">
					<div class="help-section-header">
						<div class="help-section-icon">üí°</div>
						<h3>Pro Tips</h3>
					</div>
					<div class="help-section-content">
						<ul>
							<li><strong>Local Storage</strong> - Your image are automatically saved in your browser</li>
							<li><strong>Dark Mode</strong> - Toggle between light and dark themes with the üåô/‚òÄÔ∏è button</li>
							<li><strong>Donate</strong> - Visit the nav link at the top-right of the page</li>
							
							<li><strong>Edit canvas</strong> -Edit canvas for visual context</li>
						</ul>
					</div>
				</section>
			</div>

			<div class="help-footer">
				<button class="btn help-close-btn" onclick="closeHelpModal()">Got it!</button>
			</div>
		</div>
	</div>

        <div class="editor-container">
            <div class="tool-panel">
                <div class="tool-section">
                    <h3>Image Tools</h3>
                    <div class="tool-options">
                        <input type="file" id="imageUpload" accept="image/*" style="display: none;">
                        <button class="btn" id="uploadBtn">Upload Image</button>
                        <button class="btn btn-secondary" id="downloadBtn">Download Image</button>
                        <button class="btn btn-secondary" id="clearBtn">Clear Canvas</button>
                    </div>
                </div>

                <div class="tool-section">
                    <h3>Resize Image</h3>
                    <div class="tool-options">
                        <label for="widthRange">Width: <span id="widthValue">200</span>px</label>
                        <input type="range" id="widthRange" min="100" max="1000" value="200">
                        <label for="heightRange">Height: <span id="heightValue">200</span>px</label>
                        <input type="range" id="heightRange" min="100" max="1000" value="200">
                        <button class="btn" id="applyResizeBtn">Apply Resize</button>
                    </div>
                </div>

                <div class="tool-section">
                    <h3>Add Text</h3>
                    <div class="tool-options">
                        <input type="text" id="textInput" placeholder="Enter text" class="btn-secondary" style="width: 100%;">
                        <button class="btn" id="addTextBtn">Add Text</button>
                        <label for="textColor">Text Color:</label>
                        <input type="color" id="textColor" value="#000000">
                        <label for="fontFamily">Font:</label>
                        <select id="fontFamily">
                            <option value="Arial">Arial</option>
                            <option value="Times New Roman">Times New Roman</option>
                            <option value="Courier New">Courier New</option>
                            <option value="Georgia">Georgia</option>
                            <option value="Verdana">Verdana</option>
                            <option value="Impact">Impact</option>
                            <option value="Comic Sans MS">Comic Sans MS</option>
                        </select>
                        <label for="textSize">Size: <span id="textSizeValue">20</span>px</label>
                        <input type="range" id="textSize" min="10" max="72" value="20">
                    </div>
                </div>

                <div class="tool-section">
                    <h3>Add Sticker</h3>
                    <div class="sticker-grid">
                        <img src="https://cdn-icons-png.flaticon.com/512/1086/1086741.png" class="sticker" data-sticker="heart">
                        <img src="https://cdn-icons-png.flaticon.com/512/1828/1828884.png" class="sticker" data-sticker="star">
                        <img src="https://cdn-icons-png.flaticon.com/512/3524/3524636.png" class="sticker" data-sticker="smile">
                        <img src="https://cdn-icons-png.flaticon.com/512/1047/1047711.png" class="sticker" data-sticker="thumbs-up">
                        <img src="https://cdn-icons-png.flaticon.com/512/1034/1034153.png" class="sticker" data-sticker="fire">
                        <img src="https://cdn-icons-png.flaticon.com/512/1086/1086931.png" class="sticker" data-sticker="music">
                    </div>
                </div>

                <div class="tool-section">
                    <h3>Filters</h3>
                    <div class="filter-grid">
                        <div class="filter-option" style="background-color: #f5f6fa;" data-filter="none">None</div>
                        <div class="filter-option" style="filter: grayscale(100%);" data-filter="grayscale">Grayscale</div>
                        <div class="filter-option" style="filter: sepia(100%);" data-filter="sepia">Sepia</div>
                        <div class="filter-option" style="filter: invert(100%);" data-filter="invert">Invert</div>
                        <div class="filter-option" style="filter: brightness(150%);" data-filter="brightness">Bright</div>
                        <div class="filter-option" style="filter: contrast(150%);" data-filter="contrast">Contrast</div>
                        <div class="filter-option" style="filter: hue-rotate(90deg);" data-filter="hue-rotate">Hue</div>
                        <div class="filter-option" style="filter: saturate(200%);" data-filter="saturate">Saturate</div>
                    </div>
                </div>
            </div>

           <div class="canvas-container">
                <canvas id="canvas" width="500" height="300"></canvas>
            </div>
        </div>

        <div class="footer">
            <p>contact ‚òé @+234 706 890 2982 Tiktok@fhiness.dev</p>
            <p>Finesse Image Editor &copy; 2025 | Created by Odebunmi Quadri</p>
            
        </div>
    </div>


        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>
    <script>
            function closeHelpModal() {
				document.getElementById('helpModal').classList.remove('show');
			}
			// Ajouter l'√©couteur d'√©v√©nement pour le bouton d'aide
			document.getElementById('helpToggle').addEventListener('click', function() {
				document.getElementById('helpModal').classList.add('show');
			});
			// Exposer la fonction closeHelpModal globalement
			window.closeHelpModal = closeHelpModal;
         let guid = document.getElementById("guide");
      function hide(params) {
           guid.style.visibility ="hidden";
      }

        document.addEventListener('DOMContentLoaded', function() {
            
            setInterval(() => {
                guid.style.visibility = "hidden";
            }, 8000);
            // Theme toggle
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = document.getElementById('themeIcon');
            let darkMode = false;

            themeToggle.addEventListener('click', function() {
                darkMode = !darkMode;
                if (darkMode) {
                    document.body.classList.add('dark-mode');
                    themeIcon.textContent = '‚òÄÔ∏è';
                    themeToggle.innerHTML = '<span id="themeIcon">‚òÄÔ∏è</span>';
                } else {
                    document.body.classList.remove('dark-mode');
                    themeIcon.textContent = 'üåô';
                    themeToggle.innerHTML = '<span id="themeIcon">üåô</span>';
                }
            });

            // Canvas setup
            const canvas = document.getElementById('canvas');
            const ctx = canvas.getContext('2d');
            let canvasImage = null;
            let activeFilter = 'none';
            let currentTextSettings = {
                color: '#000000',
                font: 'Arial',
                size: 20
            };

            // Initialize canvas with white background
            
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Upload image
            const uploadBtn = document.getElementById('uploadBtn');
            const imageUpload = document.getElementById('imageUpload');

            uploadBtn.addEventListener('click', function() {
                imageUpload.click();
            });

            imageUpload.addEventListener('change', function(e) {
                if (e.target.files && e.target.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        const img = new Image();
                        img.onload = function() {
                            canvas.width = img.width;
                            canvas.height = img.height;
                            document.getElementById('widthRange').value = img.width;
                            document.getElementById('heightRange').value = img.height;
                            document.getElementById('widthValue').textContent = img.width;
                            document.getElementById('heightValue').textContent = img.height;
                            ctx.drawImage(img, 0, 0);
                            canvasImage = img;
                            applyFilter(activeFilter);
                        };
                        img.src = event.target.result;
                    };
                    reader.readAsDataURL(e.target.files[0]);
                }
            });

            // Resize controls
            const widthRange = document.getElementById('widthRange');
            const heightRange = document.getElementById('heightRange');
            const widthValue = document.getElementById('widthValue');
            const heightValue = document.getElementById('heightValue');
            const applyResizeBtn = document.getElementById('applyResizeBtn');

            widthRange.addEventListener('input', function() {
                widthValue.textContent = this.value;
            });

            heightRange.addEventListener('input', function() {
                heightValue.textContent = this.value;
            });

            applyResizeBtn.addEventListener('click', function() {
                const newWidth = parseInt(widthRange.value);
                const newHeight = parseInt(heightRange.value);
                
                // Create a temporary canvas to preserve the current image
                const tempCanvas = document.createElement('canvas');
                const tempCtx = tempCanvas.getContext('2d');
                tempCanvas.width = canvas.width;
                tempCanvas.height = canvas.height;
                tempCtx.drawImage(canvas, 0, 0);
                
                // Resize the main canvas
                canvas.width = newWidth;
                canvas.height = newHeight;
                
                // Draw the temporary canvas content onto the resized main canvas
                ctx.drawImage(tempCanvas, 0, 0, tempCanvas.width, tempCanvas.height, 0, 0, newWidth, newHeight);
                
                // Update the canvasImage if it exists
                if (canvasImage) {
                    const img = new Image();
                    img.onload = function() {
                        canvasImage = img;
                        applyFilter(activeFilter);
                    };
                    img.src = canvas.toDataURL();
                }
            });

            // Text controls
            const textInput = document.getElementById('textInput');
            const addTextBtn = document.getElementById('addTextBtn');
            const textColor = document.getElementById('textColor');
            const fontFamily = document.getElementById('fontFamily');
            const textSize = document.getElementById('textSize');
            const textSizeValue = document.getElementById('textSizeValue');

            textColor.addEventListener('input', function() {
                currentTextSettings.color = this.value;
            });

            fontFamily.addEventListener('change', function() {
                currentTextSettings.font = this.value;
            });

            textSize.addEventListener('input', function() {
                currentTextSettings.size = this.value;
                textSizeValue.textContent = this.value;
            });

            addTextBtn.addEventListener('click', function() {
                if (textInput.value.trim() === '') return;
                
                const textElement = document.createElement('div');
                textElement.className = 'draggable draggable-text';
                textElement.contentEditable = true;
                textElement.textContent = textInput.value;
                textElement.style.color = currentTextSettings.color;
                textElement.style.fontFamily = currentTextSettings.font;
                textElement.style.fontSize = currentTextSettings.size + 'px';
                textElement.style.position = 'absolute';
                textElement.style.top = '50px';
                textElement.style.left = '50px';
                
                // Add delete button
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'delete-btn';
                deleteBtn.innerHTML = '√ó';
                deleteBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    textElement.remove();
                });
                textElement.appendChild(deleteBtn);
                
                // Add resize handle
                const resizeHandle = document.createElement('div');
                resizeHandle.className = 'resize-handle';
                textElement.appendChild(resizeHandle);
                
                makeDraggable(textElement, resizeHandle);
                
                document.querySelector('.canvas-container').appendChild(textElement);
                textInput.value = '';
            });

            // Sticker functionality
            const stickers = document.querySelectorAll('.sticker');
            
            stickers.forEach(sticker => {
                sticker.addEventListener('click', function() {
                    const stickerSrc = this.src;
                    const stickerElement = document.createElement('img');
                    stickerElement.className = 'draggable draggable-sticker';
                    stickerElement.src = stickerSrc;
                    stickerElement.style.position = 'absolute';
                    stickerElement.style.top = '50px';
                    stickerElement.style.left = '50px';
                    
                    // Add delete button
                    const deleteBtn = document.createElement('button');
                    deleteBtn.className = 'delete-btn';
                    deleteBtn.innerHTML = '√ó';
                    deleteBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        stickerElement.remove();
                    });
                    stickerElement.appendChild(deleteBtn);
                    
                    // Add resize handle
                    const resizeHandle = document.createElement('div');
                    resizeHandle.className = 'resize-handle';
                    stickerElement.appendChild(resizeHandle);
                    
                    makeDraggable(stickerElement, resizeHandle);
                    
                    document.querySelector('.canvas-container').appendChild(stickerElement);
                });
            });

            // Filter functionality
            const filterOptions = document.querySelectorAll('.filter-option');
            
            filterOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Remove active class from all options
                    filterOptions.forEach(opt => opt.classList.remove('active'));
                    // Add active class to clicked option
                    this.classList.add('active');
                    
                    const filter = this.getAttribute('data-filter');
                    activeFilter = filter;
                    applyFilter(filter);
                });
            });

            function applyFilter(filter) {
                if (!canvasImage) return;
                
                ctx.filter = filter === 'none' ? 'none' : 
                            filter === 'grayscale' ? 'grayscale(100%)' :
                            filter === 'sepia' ? 'sepia(100%)' :
                            filter === 'invert' ? 'invert(100%)' :
                            filter === 'brightness' ? 'brightness(150%)' :
                            filter === 'contrast' ? 'contrast(150%)' :
                            filter === 'hue-rotate' ? 'hue-rotate(90deg)' :
                            filter === 'saturate' ? 'saturate(200%)' : 'none';
                
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.drawImage(canvasImage, 0, 0);
                
                // Reset filter after applying
                ctx.filter = 'none';
            }

            // Download functionality
            const downloadBtn = document.getElementById('downloadBtn');
            
            downloadBtn.addEventListener('click', function() {
                // Create a temporary canvas to include all elements
                const tempCanvas = document.createElement('canvas');
                const tempCtx = tempCanvas.getContext('2d');
                tempCanvas.width = canvas.width;
                tempCanvas.height = canvas.height;
                
                // Draw the main canvas first
                tempCtx.drawImage(canvas, 0, 0);
                
                // Now draw all draggable elements
                const draggables = document.querySelectorAll('.draggable');
                
                draggables.forEach(draggable => {
                    if (draggable.classList.contains('draggable-text')) {
                        // For text elements
                        tempCtx.font = `${draggable.style.fontSize} ${draggable.style.fontFamily}`;
                        tempCtx.fillStyle = draggable.style.color;
                        const rect = draggable.getBoundingClientRect();
                        const canvasRect = canvas.getBoundingClientRect();
                        const x = rect.left - canvasRect.left;
                        const y = rect.top - canvasRect.top;
                        tempCtx.fillText(draggable.textContent.replace('√ó', ''), x, y + parseInt(draggable.style.fontSize));
                    } else if (draggable.classList.contains('draggable-sticker')) {
                        // For sticker elements
                        const img = new Image();
                        img.src = draggable.src;
                        const rect = draggable.getBoundingClientRect();
                        const canvasRect = canvas.getBoundingClientRect();
                        const x = rect.left - canvasRect.left;
                        const y = rect.top - canvasRect.top;
                        const width = rect.width;
                        const height = rect.height;
                        tempCtx.drawImage(img, x, y, width, height);
                    }
                });
                
                // Create download link
                const link = document.createElement('a');
                link.download = 'finesse-editor-image.png';
                link.href = tempCanvas.toDataURL('image/png');
                link.click();
            });

            // Clear canvas
            const clearBtn = document.getElementById('clearBtn');
            
            clearBtn.addEventListener('click', function() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = 'white';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                canvasImage = null;
                
                // Remove all draggable elements
                document.querySelectorAll('.draggable').forEach(el => el.remove());
            });

            // Draggable functionality
            function makeDraggable(element, resizeHandle) {
                let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
                let isResizing = false;
                
                element.onmousedown = dragMouseDown;
                
                function dragMouseDown(e) {
                    e = e || window.event;
                    e.preventDefault();
                    
                    // Check if the click is on the resize handle
                    if (e.target === resizeHandle) {
                        isResizing = true;
                    } else {
                        isResizing = false;
                        // Get the mouse cursor position at startup
                        pos3 = e.clientX;
                        pos4 = e.clientY;
                    }
                    
                    document.onmouseup = closeDragElement;
                    document.onmousemove = elementDrag;
                }
                
                function elementDrag(e) {
                    e = e || window.event;
                    e.preventDefault();
                    
                    if (isResizing) {
                        // Resize the element
                        const newWidth = e.clientX - element.getBoundingClientRect().left;
                        const newHeight = e.clientY - element.getBoundingClientRect().top;
                        
                        if (element.classList.contains('draggable-text')) {
                            element.style.width = Math.max(50, newWidth) + 'px';
                            element.style.height = Math.max(20, newHeight) + 'px';
                        } else {
                            element.style.width = Math.max(30, newWidth) + 'px';
                            element.style.height = Math.max(30, newHeight) + 'px';
                        }
                    } else {
                        // Calculate the new cursor position
                        pos1 = pos3 - e.clientX;
                        pos2 = pos4 - e.clientY;
                        pos3 = e.clientX;
                        pos4 = e.clientY;
                        
                        // Set the element's new position
                        element.style.top = (element.offsetTop - pos2) + "px";
                        element.style.left = (element.offsetLeft - pos1) + "px";
                    }
                }
                
                function closeDragElement() {
                    // Stop moving when mouse button is released
                    document.onmouseup = null;
                    document.onmousemove = null;
                }
            }
        });
    </script>
</body>
</html>
